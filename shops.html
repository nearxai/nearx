<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>NearX — Local Stores & WhatsApp Ordering</title>

<style>
  :root{
    --max-w:1100px;
    --accent1:#246BFD;
    --accent2:#6A11CB;
    --bg:#ffffff;
    --muted:#707582;
    --card:#ffffff;
    --radius:14px;
    --shadow:0 12px 30px rgba(10,10,40,0.06);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:Inter,system-ui,Segoe UI,Roboto;
    background:linear-gradient(180deg,#f7f9ff,#ffffff);
    color:#0b1221;
  }
  .wrap{max-width:var(--max-w);margin:18px auto;padding:18px}
  header{display:flex;align-items:center;justify-content:space-between}
  .logo{
    width:52px;height:52px;border-radius:12px;
    background:linear-gradient(135deg,var(--accent1),var(--accent2));
    display:flex;align-items:center;justify-content:center;
    color:#fff;font-weight:800;font-size:22px;
  }
  .tag{color:var(--muted);font-size:13px}
  .hero{
    background:linear-gradient(135deg,#246BFD,#6A11CB);
    color:#fff;padding:28px;border-radius:22px;
    box-shadow:var(--shadow);display:flex;
    gap:18px;justify-content:space-between;
  }
  .searchbar{
    display:flex;gap:10px;background:rgba(255,255,255,0.15);
    padding:8px;border-radius:12px;margin-top:10px;
  }
  .searchbar input{
    flex:1;padding:12px;border:0;background:transparent;color:#fff;
  }
  .cats{
    display:flex;gap:10px;overflow:auto;margin-top:16px;
  }
  .cat{
    min-width:110px;padding:12px;background:#fff;
    border-radius:14px;box-shadow:var(--shadow);
    text-align:center;cursor:pointer;
  }
  main{display:flex;gap:22px;margin-top:20px}
  .store-card{
    background:#fff;border-radius:18px;box-shadow:var(--shadow);
    padding:14px;display:flex;gap:12px;
  }
  .thumb{width:82px;height:82px;border-radius:12px;object-fit:cover}
  .cart{
    background:#fff;padding:14px;border-radius:16px;
    box-shadow:var(--shadow);position:sticky;top:20px;
  }
  .cart-row{
    border-bottom:1px dashed #ddd;padding:8px 0;
    display:flex;justify-content:space-between;
  }
  .modal-backdrop{
    position:fixed;inset:0;background:rgba(0,0,0,0.55);
    display:none;align-items:center;justify-content:center;z-index:200;
  }
  .modal{
    width:95%;max-width:840px;background:#fff;
    padding:18px;border-radius:16px;
    box-shadow:0 20px 50px rgba(0,0,0,0.25);
  }
  @media(max-width:900px){
    main{flex-direction:column}
  }
</style>
</head>
<body>

<div class="wrap">

<header>
  <div style="display:flex;align-items:center;gap:12px">
    <div class="logo">NX</div>
    <div>
      <h2 style="margin:0">NearX Stores</h2>
      <div class="tag">Everything near you — order on WhatsApp</div>
    </div>
  </div>

  <div style="display:flex;gap:10px">
    <a href="index.html" class="btn btn-ghost">Home</a>
    <a href="crm.html" class="btn btn-ghost">CRM</a>
    <button class="btn btn-primary" id="merchantJoinBtn">List Your Shop</button>
  </div>
</header>


<!-- HERO -->
<section class="hero">
  <div>
    <h2>Find stores, compare prices & order instantly</h2>
    <p>Updated directly by merchants — reliable, fast & local.</p>

    <div class="searchbar">
      <input id="q" placeholder="Search: sugar, rice, bakery...">
      <select id="area"></select>
      <button id="searchBtn">Search</button>
    </div>
    <div class="cats" id="categories"></div>
  </div>
</section>


<main>

  <!-- STORES LIST -->
  <div style="flex:1">
    <h3>Nearby Stores</h3>
    <div id="storesGrid"></div>
  </div>

  <!-- CART -->
  <aside style="width:350px">
    <div class="cart">
      <h3>Your Cart</h3>
      <div id="cartItems">No items</div>
      <div class="cart-row"><strong>Total</strong><strong id="cartTotal">₹0</strong></div>

      <input id="custName" placeholder="Your Name" style="margin-top:10px;padding:10px;width:100%">
      <input id="custPhone" placeholder="WhatsApp Number" style="margin-top:10px;padding:10px;width:100%">

      <button id="clearCart" style="margin-top:10px;width:100%">Clear</button>
      <button id="checkoutBtn" style="margin-top:10px;width:100%;background:#246BFD;color:#fff;padding:12px;border-radius:10px">Checkout on WhatsApp</button>
    </div>
  </aside>

</main>

<footer style="text-align:center;margin-top:30px;color:#707582">
 © <span id="year"></span> NearX Stores  
</footer>

</div>

<!-- PRODUCT MODAL -->
<div class="modal-backdrop" id="modalBackdrop">
  <div class="modal">
    <div style="display:flex;justify-content:space-between">
      <h3 id="modalTitle"></h3>
      <button id="closeModal">Close</button>
    </div>
    <p id="modalDesc"></p>
    <div id="prodGrid"></div>
  </div>
</div>

<!-- MERCHANT MODAL -->
<div class="modal-backdrop" id="merchantModal">
  <div class="modal">
    <h3>List Your Shop</h3>

    <form id="merchantForm" style="display:grid;gap:10px">
      <input name="shop_name" placeholder="Shop Name">
      <input name="owner_name" placeholder="Owner Name">
      <input name="phone" placeholder="WhatsApp Number">
      <input name="area" placeholder="Area / Locality">

      <select name="category">
        <option>Grocery</option>
        <option>Bakery</option>
        <option>Restaurant</option>
        <option>Pharmacy</option>
      </select>

      <textarea name="notes" placeholder="Short Description"></textarea>

      <button>Submit</button>
      <button type="button" id="closeMerchant">Cancel</button>

      <div id="merchantMsg" style="display:none;color:green"></div>
    </form>
  </div>
</div>

<script>
document.getElementById("year").innerText = new Date().getFullYear();


/* CONFIG */
const DATA_URL = "";
const MERCHANT_FORM_URL = "";
const OWNER_PHONE_DEFAULT = "919000810084";


/* DEMO DATA */
const demoData={
 stores:[
   {id:"S1",name:"Fresh Mart",area:"Dilsukhnagar",category:"Grocery",
    desc:"Daily groceries",phone:"919000810084",
    thumb:"https://i.ibb.co/5xWt7gRM/file-00000000c66c7209aa546551ca843503-1.png"},
 ],
 products:[
   {shop_id:"S1",product:"Sugar 1kg",price:45,
    image:"https://i.ibb.co/5xWt7gRM/file-00000000c66c7209aa546551ca843503-1.png"},
 ],
 categories:["Grocery","Bakery"]
};

let stores=[],products=[],categories=[];
let cart=[];
let selectedStoreId=null;

function money(n){return "₹"+n;}

/* LOAD DATA */
function loadData(){
 stores=demoData.stores;
 products=demoData.products;
 categories=demoData.categories;
 loadUI();
}
loadData();

function loadUI(){
 loadAreas();
 loadCats();
 renderStores(stores);
}

function loadAreas(){
 let a=document.getElementById("area");
 a.innerHTML="<option value=''>All</option>";
 [...new Set(stores.map(s=>s.area))].forEach(x=>{
  a.innerHTML+=`<option>${x}</option>`;
 });
}

function loadCats(){
 let c=document.getElementById("categories");
 categories.forEach(k=>{
   let d=document.createElement("div");
   d.className="cat";
   d.innerHTML=`${k}<br><small>Tap</small>`;
   d.onclick=()=>{document.getElementById("q").value=k; searchStores();};
   c.appendChild(d);
 });
}

function searchStores(){
 let q=document.getElementById("q").value.toLowerCase();
 let a=document.getElementById("area").value;

 let found=stores.filter(s=>
   (!q || s.name.toLowerCase().includes(q) || s.category.toLowerCase().includes(q)) &&
   (!a || s.area===a)
 );
 renderStores(found);
}

document.getElementById("searchBtn").onclick=searchStores;

function renderStores(list){
 let g=document.getElementById("storesGrid");
 g.innerHTML="";
 list.forEach(s=>{
   let d=document.createElement("div");
   d.className="store-card";
   d.innerHTML=`
    <img class="thumb" src="${s.thumb}">
    <div>
      <b>${s.name}</b><br>
      <span>${s.category} • ${s.area}</span><br>
      <button onclick="openStore('${s.id}')">View</button>
    </div>`;
   g.appendChild(d);
 });
}

/* OPEN STORE MODAL */
function openStore(id){
 selectedStoreId=id;
 let s=stores.find(x=>x.id===id);
 document.getElementById("modalTitle").innerText=s.name;
 document.getElementById("modalDesc").innerText=s.desc||"";
 let grid=document.getElementById("prodGrid");
 grid.innerHTML="";
 let list=products.filter(p=>p.shop_id===id);
 list.forEach(p=>{
  let d=document.createElement("div");
  d.innerHTML=`
    <img src="${p.image}" style="width:150px">
    <div>${p.product}</div>
    <div>${money(p.price)}</div>
    <button onclick="addToCart('${p.product}',${p.price})">Add</button>
  `;
  grid.appendChild(d);
 });
 showModal("modalBackdrop");
}

document.getElementById("closeModal").onclick=()=>hideModal("modalBackdrop");

/* CART */
function addToCart(product,price){
 cart.push({product,price,qty:1,shop_id:selectedStoreId});
 renderCart();
}

function renderCart(){
 let c=document.getElementById("cartItems");
 c.innerHTML="";
 if(!cart.length){c.innerHTML="No items";return;}

 let total=0;
 cart.forEach(x=>{
   total+=x.price*x.qty;
   c.innerHTML+=`${x.product} - ${money(x.price)}<br>`;
 });

 document.getElementById("cartTotal").innerText=money(total);
}

document.getElementById("clearCart").onclick=()=>{cart=[];renderCart();};

/* CHECKOUT */
document.getElementById("checkoutBtn").onclick=()=>{
 if(!cart.length){alert("Cart empty");return;}
 let n=document.getElementById("custName").value;
 let p=document.getElementById("custPhone").value;
 if(!n||!p){alert("Enter details");return;}
 let m=cart.map(x=>`${x.product} - ${money(x.price)}`).join("\n");
 let msg=`Order from ${n}\n${m}`;
 window.open(`https://wa.me/${OWNER_PHONE_DEFAULT}?text=${encodeURIComponent(msg)}`);
};

/* MERCHANT MODAL */
document.getElementById("merchantJoinBtn").onclick=()=>showModal("merchantModal");
document.getElementById("closeMerchant").onclick=()=>hideModal("merchantModal");

function showModal(id){document.getElementById(id).style.display="flex";}
function hideModal(id){document.getElementById(id).style.display="none";}
</script>

</body>
</html>
