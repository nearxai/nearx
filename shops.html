<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NearX — Local Stores & WhatsApp Ordering</title>

<style>
  :root{
    --max-w:1100px;
    --accent1:#246BFD;
    --accent2:#6A11CB;
    --bg:#ffffff;
    --muted:#707582;
    --shadow:0 12px 30px rgba(10,10,40,0.06);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:Inter,system-ui,Segoe UI,Roboto;
    background:linear-gradient(180deg,#f7f9ff,#ffffff);
    color:#0b1221;
  }
  a{text-decoration:none;color:inherit}
  .wrap{max-width:var(--max-w);margin:18px auto;padding:18px}

  header{display:flex;align-items:center;justify-content:space-between}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{
    width:52px;height:52px;border-radius:12px;
    background:linear-gradient(135deg,var(--accent1),var(--accent2));
    display:flex;align-items:center;justify-content:center;
    color:#fff;font-weight:800;font-size:22px;
  }
  h1{margin:0;font-size:20px}
  .tag{color:var(--muted);font-size:13px;margin-top:4px}

  /* HERO */
  .hero{
    background:linear-gradient(135deg,#246BFD,#6A11CB);
    color:#fff;padding:28px;border-radius:22px;
    box-shadow:var(--shadow);margin-top:16px;
  }
  .hero h2{margin:0;font-size:26px;font-weight:800}

  .searchbar{
    display:flex;gap:10px;background:rgba(255,255,255,0.15);
    padding:8px;border-radius:12px;margin-top:16px;
  }
  .searchbar input{
    flex:1;padding:12px;border:0;background:transparent;color:#fff;font-size:15px;
  }
  .searchbar select{
    padding:10px;border:0;background:transparent;color:#fff;font-weight:700;
    border-radius:10px;
  }
  .searchbar button{
    background:#fff;border:0;padding:10px 14px;border-radius:10px;font-weight:700;
  }

  .cats{display:flex;gap:10px;overflow:auto;margin-top:14px}
  .cat{
    min-width:110px;background:#fff;padding:12px;border-radius:14px;
    text-align:center;cursor:pointer;box-shadow:var(--shadow);
  }
  .cat img{width:44px;height:44px}

  /* GRID */
  main{display:flex;gap:22px;margin-top:22px}
  .left{flex:1}
  .right{width:360px}

  .grid{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
    gap:16px;
  }
  .store-card{
    background:#fff;padding:14px;border-radius:18px;
    box-shadow:var(--shadow);display:flex;gap:12px;
  }
  .thumb{
    width:80px;height:80px;border-radius:12px;object-fit:cover;
  }
  .meta{font-size:13px;color:var(--muted)}

  /* CART */
  .cart{
    background:#fff;padding:14px;border-radius:16px;
    box-shadow:var(--shadow);position:sticky;top:20px;
  }
  .cart-row{
    padding:8px 0;border-bottom:1px dashed #eee;
    display:flex;justify-content:space-between;
  }

  /* MODAL */
  .modal-backdrop{
    position:fixed;inset:0;background:rgba(0,0,0,0.45);
    display:none;align-items:center;justify-content:center;z-index:200;
  }
  .modal{
    width:95%;max-width:860px;background:#fff;padding:18px;border-radius:14px;
    box-shadow:0 30px 60px rgba(10,10,40,0.3);
  }
  .prod-grid{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(210px,1fr));
    gap:12px;margin-top:12px;
  }
  .prod{
    padding:10px;border-radius:12px;border:1px solid #f1f4fb;
  }
  .prod img{
    width:100%;height:110px;object-fit:cover;border-radius:8px;
  }

  /* MERCHANT FORM */
  .form-input{
    padding:10px;border:1px solid #ddd;border-radius:10px;width:100%;margin-top:8px;
  }

  @media(max-width:980px){
    main{flex-direction:column}
    .right{width:100%;position:static}
  }
</style>
</head>
<body>
<div class="wrap">

<header>
  <div class="brand">
    <div class="logo">NX</div>
    <div>
      <h1>NearX Stores</h1>
      <div class="tag">Everything near you — order on WhatsApp</div>
    </div>
  </div>

  <div style="display:flex;gap:10px">
    <a href="index.html" class="meta">Home</a>
    <a href="crm.html" class="meta">CRM</a>
    <button class="meta" id="merchantJoinBtn" style="padding:8px 16px;border-radius:10px;border:1px solid #ccc">
      List Your Shop
    </button>
  </div>
</header>

<section class="hero">
  <h2>Find stores, compare prices & order instantly</h2>

  <div class="searchbar">
    <input id="q" placeholder="Search — sugar, rice, bakery, etc.">
    <select id="area"></select>
    <button id="searchBtn">Search</button>
  </div>

  <div class="cats" id="categories"></div>
</section>

<main>
  <div class="left">
    <h3>Nearby Stores</h3>
    <div class="grid" id="storesGrid"></div>
  </div>

  <aside class="right">
    <div class="cart">
      <h4>Your Cart</h4>
      <div id="cartItems">No items</div>
      <div class="cart-row"><strong>Total</strong><strong id="cartTotal">₹0</strong></div>

      <input id="custName" placeholder="Your Name" style="margin-top:10px" class="form-input">
      <input id="custPhone" placeholder="WhatsApp Number" style="margin-top:10px" class="form-input">

      <div style="display:flex;gap:8px;margin-top:10px">
        <button id="clearCart" style="flex:1">Clear</button>
        <button id="checkoutBtn" style="flex:1;background:#246BFD;color:#fff;border:0;padding:10px;border-radius:8px">Order</button>
      </div>
    </div>
  </aside>
</main>

<footer style="text-align:center;margin-top:30px;color:#707582">
  © <span id="year"></span> NearX Stores
</footer>

</div>

<!-- Product Modal -->
<div class="modal-backdrop" id="modalBackdrop">
  <div class="modal">
    <h3 id="modalTitle"></h3>
    <p id="modalDesc" class="meta"></p>
    <div class="prod-grid" id="prodGrid"></div>
    <button onclick="hideModal('modalBackdrop')" style="margin-top:10px">Close</button>
  </div>
</div>

<!-- MERCHANT FORM MODAL -->
<div class="modal-backdrop" id="merchantModal">
  <div class="modal">
    <h3>List Your Shop on NearX</h3>
    <p class="meta">We will create your shop ID & product sheet.</p>

    <form id="merchantForm" style="display:grid;gap:12px;margin-top:10px;">
      <input name="shop_name" class="form-input" placeholder="Shop Name" required>
      <input name="owner_name" class="form-input" placeholder="Owner Name">
      <input name="phone" class="form-input" placeholder="WhatsApp Number" required>
      <input name="area" class="form-input" placeholder="Area / Locality" required>

      <select name="category" class="form-input" required>
        <option>Grocery</option>
        <option>Bakery</option>
        <option>Restaurant</option>
        <option>Pharmacy</option>
        <option>Electronics</option>
        <option>Fashion</option>
      </select>

      <textarea name="notes" class="form-input" placeholder="Short description"></textarea>

      <div style="display:flex;gap:10px;margin-top:10px;">
        <button type="button" onclick="hideModal('merchantModal')" class="form-input" style="background:#eee">
          Cancel
        </button>
        <button class="form-input" style="background:#246BFD;color:white;border:0">
          Submit
        </button>
      </div>

      <div id="merchantMsg" style="display:none;color:green;font-weight:700;margin-top:10px;"></div>
    </form>

  </div>
</div>

<script>
document.getElementById("year").innerText = new Date().getFullYear();

/* CATEGORY ICON MAP */
function getIcon(cat){
  const icons = {
    Grocery: "https://cdn-icons-png.flaticon.com/512/3515/3515285.png",
    Bakery: "https://cdn-icons-png.flaticon.com/512/922/922699.png",
    Restaurant: "https://cdn-icons-png.flaticon.com/512/1046/1046857.png",
    Pharmacy: "https://cdn-icons-png.flaticon.com/512/2965/2965567.png",
    Electronics: "https://cdn-icons-png.flaticon.com/512/1048/1048949.png",
    Fashion: "https://cdn-icons-png.flaticon.com/512/892/892458.png"
  };
  return icons[cat] || "https://cdn-icons-png.flaticon.com/512/3081/3081559.png";
}

/* DEMO DATA */
const demoData = {
  stores:[
    {id:"S001",name:"Fresh Mart",category:"Grocery",area:"Dilsukhnagar",desc:"Daily groceries & staples"},
    {id:"S002",name:"Bakers Hub",category:"Bakery",area:"LB Nagar",desc:"Fresh breads & cakes"}
  ],
  products:[
    {shop_id:"S001",product:"Sugar 1kg",price:45,image:"https://via.placeholder.com/200"},
    {shop_id:"S001",product:"Rice 5kg",price:325,image:"https://via.placeholder.com/200"},
    {shop_id:"S002",product:"Chocolate Cake",price:350,image:"https://via.placeholder.com/200"}
  ],
  categories:["Grocery","Bakery","Restaurant","Pharmacy","Fashion"]
};

let stores = demoData.stores;
let products = demoData.products;
let categories = demoData.categories;
let cart = [];

/* UI RENDERING */
function loadUI(){
  loadAreas();
  loadCategories();
  renderStores(stores);
}
loadUI();

function loadAreas(){
  const area=document.getElementById("area");
  area.innerHTML="<option value=''>All</option>";
  [...new Set(stores.map(s=>s.area))].forEach(a=>{
    area.innerHTML += `<option>${a}</option>`;
  });
}

function loadCategories(){
  const cats=document.getElementById("categories");
  cats.innerHTML="";
  categories.forEach(c=>{
    cats.innerHTML += `
      <div class="cat" onclick="setCategory('${c}')">
        <img src="${getIcon(c)}">
        <div>${c}</div>
        <small style="color:gray">Tap to filter</small>
      </div>`;
  });
}

function setCategory(cat){
  document.getElementById("q").value = cat;
  searchStores();
}

function renderStores(list){
  const grid=document.getElementById("storesGrid");
  grid.innerHTML="";
  if(!list.length){
    grid.innerHTML="<div>No stores found</div>";
    return;
  }
  list.forEach(s=>{
    grid.innerHTML += `
      <div class="store-card">
        <img class="thumb" src="${getIcon(s.category)}">
        <div>
          <h3>${s.name}</h3>
          <div class="meta">${s.category} • ${s.area}</div>
          <button onclick="openStore('${s.id}')" style="margin-top:6px">View</button>
        </div>
      </div>`;
  });
}

/* SEARCH */
function searchStores(){
  let q=document.getElementById("q").value.toLowerCase();
  let area=document.getElementById("area").value;

  const list = stores.filter(s=>{
    let matchQ=!q || s.name.toLowerCase().includes(q) || s.category.toLowerCase().includes(q);
    let matchA=!area || s.area===area;
    return matchQ && matchA;
  });

  renderStores(list);
}

/* PRODUCT MODAL */
function openStore(id){
  const s=stores.find(x=>x.id===id);
  const list=products.filter(p=>p.shop_id===id);

  document.getElementById("modalTitle").innerText=s.name;
  document.getElementById("modalDesc").innerText=s.desc || "";

  const grid=document.getElementById("prodGrid");
  grid.innerHTML="";

  list.forEach(p=>{
    grid.innerHTML+=`
      <div class="prod">
        <img src="${p.image}">
        <div>${p.product}</div>
        <div>₹${p.price}</div>
      </div>`;
  });

  showModal("modalBackdrop");
}

/* CART OPERATIONS */
function showModal(id){document.getElementById(id).style.display="flex";}
function hideModal(id){document.getElementById(id).style.display="none";}

/* MERCHANT POPUP */
document.getElementById("merchantJoinBtn").onclick = () => showModal("merchantModal");

document.getElementById("merchantForm").onsubmit = (e)=>{
  e.preventDefault();
  document.getElementById("merchantMsg").innerText="Shop request submitted!";
  document.getElementById("merchantMsg").style.display="block";
  e.target.reset();
};
</script>

</body>
</html>
