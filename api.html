<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>NearX API Access</title>
<style>
  body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto;background:#f6f7fb;color:#111}
  .wrap{max-width:900px;margin:20px auto;padding:20px}
  header{display:flex;align-items:center;justify-content:space-between;background:#fff;padding:14px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.05)}
  .logo{width:42px;height:42px;background:linear-gradient(135deg,#246BFD,#6A11CB);border-radius:10px;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:800}
  .hero{background:linear-gradient(135deg,#246BFD,#6A11CB);color:#fff;padding:22px;border-radius:12px;margin-top:18px}
  .box{background:#fff;padding:18px;border-radius:12px;margin-top:18px;box-shadow:0 6px 20px rgba(0,0,0,0.06)}
  input,textarea{width:100%;padding:12px;border-radius:10px;border:1px solid #ddd;margin-top:10px}
  button{margin-top:12px;padding:12px;border-radius:10px;border:0;background:linear-gradient(90deg,#246BFD,#6A11CB);color:#fff;font-weight:700;width:100%}
  footer{text-align:center;margin-top:30px;color:#777}
</style>
</head>
<body>
<div class="wrap">
  <header><div style="display:flex;gap:12px;align-items:center"><div class="logo">NX</div><div><strong>NearX</strong><br><small style="color:#666">API Platform</small></div></div><a href="index.html" style="color:#246BFD;font-weight:700">Home</a></header>

  <div class="hero"><h2 style="margin:0">NearX API Access</h2><p style="margin:6px 0 0">Integrate store listings, catalog data, CRM automation & WhatsApp flows into your apps.</p></div>

  <div class="box">
    <h3>Request API Access</h3>
    <p style="color:#666">Fill this form to receive API Key + Documentation.</p>
    <form id="apiForm">
      <input type="hidden" name="action" value="api_request">
      <input name="business" placeholder="Business / Developer Name" required>
      <input name="email" placeholder="Email Address" required>
      <input name="phone" placeholder="WhatsApp Number (optional)">
      <textarea name="usecase" placeholder="Describe your use case" rows="4" required></textarea>
      <button type="submit">Submit Request</button>
      <div id="msg" style="margin-top:10px;font-weight:700;display:none"></div>
    </form>
  </div>

  <footer>© <span id="year"></span> NearX — API Access</footer>
</div>

<script>
document.getElementById("year").innerText = new Date().getFullYear();
const API_ENDPOINT = "https://script.google.com/macros/s/AKfycbxtQlUjFOnWCf-5cx-yt3loLom-uYY-63mMrHFe7X0rMsSwsAeateCpuA32Vja5P-44/exec?action=api_request";
document.getElementById("apiForm").onsubmit = async function(e){
  e.preventDefault();
  const msgBox = document.getElementById("msg"); msgBox.style.display = "none";
  const form = new FormData(e.target); let payload = {};
  for(const [k,v] of form.entries()) payload[k] = v;
  payload.timestamp = new Date().toISOString();
  try{
    const res = await fetch(API_ENDPOINT, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) });
    const json = await res.json();
    msgBox.style.color = json && json.ok ? "green" : "black";
    msgBox.innerText = (json && json.ok) ? "Request submitted. We'll email API access." : "Request submitted.";
  }catch(err){
    msgBox.style.color = "red";
    msgBox.innerText = "Submission failed (offline). We'll retry later.";
  }
  msgBox.style.display = "block";
  e.target.reset();
};
</script>
</body>
</html>
